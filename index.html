<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Flying Butterfly</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: linear-gradient(to bottom, #1e90ff 0%, #87CEEB 100%);
            font-family: Arial, sans-serif;
        }
        
        canvas {
            display: block;
        }
        
        .info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="info">
        ðŸ¦‹ 3D Butterfly Simulation<br>
        Click and drag to rotate view
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, butterfly;
        let wingLeft, wingRight;
        let time = 0;
        let mouseX = 0, mouseY = 0;
        let targetRotationX = 0, targetRotationY = 0;
        
        function init() {
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x1e90ff, 10, 50);
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 2, 8);
            camera.lookAt(0, 0, 0);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);
            
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            createButterfly();
            createClouds();
            
            document.addEventListener('mousemove', onMouseMove);
            window.addEventListener('resize', onWindowResize);
        }
        
        function createButterfly() {
            butterfly = new THREE.Group();
            
            const bodyGeometry = new THREE.CylinderGeometry(0.1, 0.15, 1.5, 8);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2c1810,
                shininess: 30
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;
            butterfly.add(body);
            
            const headGeometry = new THREE.SphereGeometry(0.2, 16, 16);
            const head = new THREE.Mesh(headGeometry, bodyMaterial);
            head.position.y = 0.9;
            head.castShadow = true;
            butterfly.add(head);
            
            const antennaGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.5, 4);
            const antennaMaterial = new THREE.MeshPhongMaterial({ color: 0x1a0f0a });
            
            const antenna1 = new THREE.Mesh(antennaGeometry, antennaMaterial);
            antenna1.position.set(-0.1, 1.3, 0);
            antenna1.rotation.z = -0.3;
            butterfly.add(antenna1);
            
            const antenna2 = new THREE.Mesh(antennaGeometry, antennaMaterial);
            antenna2.position.set(0.1, 1.3, 0);
            antenna2.rotation.z = 0.3;
            butterfly.add(antenna2);
            
            const wingShape = new THREE.Shape();
            wingShape.moveTo(0, 0);
            wingShape.bezierCurveTo(0, 1, 1.5, 1.5, 2, 1);
            wingShape.bezierCurveTo(2.2, 0.5, 2, -0.5, 1.5, -0.8);
            wingShape.bezierCurveTo(1, -1, 0, -0.5, 0, 0);
            
            const extrudeSettings = {
                depth: 0.05,
                bevelEnabled: true,
                bevelThickness: 0.02,
                bevelSize: 0.02,
                bevelSegments: 3
            };
            
            const wingGeometry = new THREE.ExtrudeGeometry(wingShape, extrudeSettings);
            
            const wingMaterial = new THREE.MeshPhongMaterial({
                color: 0xff69b4,
                side: THREE.DoubleSide,
                shininess: 100,
                transparent: true,
                opacity: 0.9
            });
            
            wingLeft = new THREE.Mesh(wingGeometry, wingMaterial);
            wingLeft.position.set(0, 0, 0);
            wingLeft.castShadow = true;
            butterfly.add(wingLeft);
            
            wingRight = new THREE.Mesh(wingGeometry, wingMaterial);
            wingRight.rotation.y = Math.PI;
            wingRight.position.set(0, 0, 0);
            wingRight.castShadow = true;
            butterfly.add(wingRight);
            
            const wingShape2 = new THREE.Shape();
            wingShape2.moveTo(0, 0);
            wingShape2.bezierCurveTo(0, -0.8, 1.2, -1.5, 1.8, -1.2);
            wingShape2.bezierCurveTo(2, -0.8, 1.8, -0.2, 1.2, 0);
            wingShape2.bezierCurveTo(0.6, 0.2, 0, 0.1, 0, 0);
            
            const lowerWingGeometry = new THREE.ExtrudeGeometry(wingShape2, extrudeSettings);
            const lowerWingMaterial = new THREE.MeshPhongMaterial({
                color: 0xffb6c1,
                side: THREE.DoubleSide,
                shininess: 100,
                transparent: true,
                opacity: 0.9
            });
            
            const lowerWingLeft = new THREE.Mesh(lowerWingGeometry, lowerWingMaterial);
            lowerWingLeft.position.set(0, -0.5, 0);
            lowerWingLeft.castShadow = true;
            wingLeft.add(lowerWingLeft);
            
            const lowerWingRight = new THREE.Mesh(lowerWingGeometry, lowerWingMaterial);
            lowerWingRight.position.set(0, -0.5, 0);
            lowerWingRight.castShadow = true;
            wingRight.add(lowerWingRight);
            
            butterfly.position.y = 3;
            scene.add(butterfly);
        }
        
        function createClouds() {
            for (let i = 0; i < 15; i++) {
                const cloudGroup = new THREE.Group();
                
                for (let j = 0; j < 5; j++) {
                    const cloudGeometry = new THREE.SphereGeometry(Math.random() * 0.5 + 0.3, 8, 8);
                    const cloudMaterial = new THREE.MeshPhongMaterial({
                        color: 0xffffff,
                        transparent: true,
                        opacity: 0.7
                    });
                    const cloudPart = new THREE.Mesh(cloudGeometry, cloudMaterial);
                    cloudPart.position.x = Math.random() * 2 - 1;
                    cloudPart.position.y = Math.random() * 0.5;
                    cloudPart.position.z = Math.random() * 1 - 0.5;
                    cloudGroup.add(cloudPart);
                }
                
                cloudGroup.position.x = Math.random() * 40 - 20;
                cloudGroup.position.y = Math.random() * 10 + 5;
                cloudGroup.position.z = Math.random() * 40 - 20;
                scene.add(cloudGroup);
            }
        }
        
        function onMouseMove(event) {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
            
            targetRotationY = mouseX * 0.5;
            targetRotationX = mouseY * 0.3;
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            time += 0.016;
            
            const wingFlap = Math.sin(time * 10) * 0.8;
            wingLeft.rotation.y = wingFlap;
            wingRight.rotation.y = Math.PI - wingFlap;
            
            butterfly.position.x = Math.sin(time * 0.5) * 3;
            butterfly.position.y = 3 + Math.sin(time * 0.7) * 1.5;
            butterfly.position.z = Math.cos(time * 0.4) * 2;
            
            butterfly.rotation.y += Math.sin(time * 0.3) * 0.02;
            butterfly.rotation.x = Math.sin(time * 0.5) * 0.2;
            butterfly.rotation.z = Math.sin(time * 0.4) * 0.15;
            
            camera.rotation.y += (targetRotationY - camera.rotation.y) * 0.05;
            camera.rotation.x += (targetRotationX - camera.rotation.x) * 0.05;
            
            renderer.render(scene, camera);
        }
        
        init();
        animate();
    </script>
</body>
</html>